<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.daitdayoung.user.courses">

	<!-- 나의 강의실 수강 List -->
	<select id="coursesInfo" resultType="kr.co.daitdayoung.user.domain.UserCoursesDomain" parameterType="String">
	select  i.INS_ID, COU_NAME, CONTENT, OPENDATE, BANNER_IMG, COU_PERIOD, SAMPLE_VIDEO, HITS, FINAL_APPROVE,
			i.ins_name, i.ins_profile,
			(select count(*)
			from COURSE_REGISTRATION
			where cou_code = #{couCode}) cnt 
	from    COURSES c, INSTRUCTOR i
	where 	c.ins_id = i.ins_id and cou_code = #{couCode}
	</select>
	
	<select id="coursesNotice" resultType="kr.co.daitdayoung.user.domain.UserCoursesNoticeDomain" parameterType="String">
	select  CN_CODE, i.INS_ID, CN_TITLE, CN_DATE, CN_CONTENT, INS_NAME,ROW_NUMBER() OVER (ORDER BY CN_DATE) ind
	from	COURSES_NOTICE cn, INSTRUCTOR i
	where   cou_code = #{couCode} and i.ins_id = cn.ins_id
	order by ind desc
	</select>
	
	<select id="coursesLecture" resultType="kr.co.daitdayoung.user.domain.UserCoursesLectureDomain" parameterType="kr.co.daitdayoung.user.vo.UserCoursesVO">
	select  lec.LEC_CODE, LEC_NAME, LEC_CONTENT, VIDEO_NAME, COURSE_STATUS
	from 	LECTURES lec, COURSE_RECORD cr
	where 	lec.cou_code = #{couCode} and lec.lec_code = cr.lec_code and cr.ui_id = #{uiId}
	</select>
	
	
	
</mapper>